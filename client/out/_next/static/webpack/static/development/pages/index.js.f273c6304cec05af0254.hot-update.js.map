{"version":3,"file":"static/webpack/static/development/pages/index.js.f273c6304cec05af0254.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from \"react\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n\nimport Loading from \"../components/Loading\";\nimport Layout from \"../components/Layout\";\nimport { storeCTX } from \"../components/Store\";\n\nimport Container from \"@material-ui/core/Container\";\nimport { createStyles, makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport fetch from \"isomorphic-unfetch\";\nimport { Typography } from \"@material-ui/core\";\n\nconst useStyles = makeStyles(theme =>\n  createStyles({\n    root: {\n      width: \"100vw\",\n      position: \"relative\",\n      minHeight: \"100vh\"\n    },\n    main: {\n      [theme.breakpoints.down(\"sm\")]: {\n        marginTop: theme.spacing(2)\n      },\n      marginTop: theme.spacing(8),\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\"\n    }\n  })\n);\n\nconst Home = () => {\n  const classes = useStyles();\n  const { newLink, setTopic } = React.useContext(storeCTX);\n  const [isLoading, setIsLoading] = React.useState(true);\n\n  React.useEffect(() => {\n    fetch(\"http://localhost:5000/api/checkToken\", { credentials: \"include\" })\n      .then(res => res.json())\n      .then(json => {\n        if (json.code !== 200) {\n          Router.push(\"/signin\");\n        }\n      }).then(setIsLoading(false));\n  }, []);\n\n  React.useEffect(() => {\n    setTopic(\"\");\n  }, []);\n\n  if (isLoading) {\n    return (\n      <Layout>\n        <Loading />\n      </Layout>\n    );\n  } else {\n    return (\n      <Layout>\n        <div className={classes.root}>\n          <Container className={classes.main} component=\"main\" maxWidth=\"xs\">\n            <Typography className={classes.title} component=\"h1\" variant=\"h5\">\n              Just Another Chat App\n            </Typography>\n            <List>\n              {Object.keys(newLink).map(key => (\n                <ListItem\n                  button\n                  key={key}\n                  onClick={() => {\n                    //for the useEffect fetch on [id].js\n                    window.localStorage.setItem(\n                      \"topic\",\n                      JSON.stringify(newLink[key].title)\n                    );\n                  }}\n                >\n                  <Link href=\"/p/[id]\" as={`/p/${newLink[key].title}`}>\n                    <ListItemText primary={newLink[key].title} />\n                  </Link>\n                </ListItem>\n              ))}\n            </List>\n          </Container>{\" \"}\n        </div>\n      </Layout>\n    );\n  }\n};\n\nexport default Home;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AAEA;AADA;AAPA;AADA;AACA;AAkBA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAIA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AAsBA;AACA;AACA;AACA;;;;A","sourceRoot":""}