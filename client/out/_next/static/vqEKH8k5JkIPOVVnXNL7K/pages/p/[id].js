(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{I42U:function(t,e,n){"use strict";var a=n("9Jkg"),o=n.n(a),c=n("doui"),i=n("q1tI"),r=n.n(i),s=n("R/WZ"),l=n("ZBNC"),u=n("r9w1"),d=n("Z3vd"),p=n("bXiM"),f=n("lO0E"),h=n("p46w"),m=n.n(h),g=n("c8I3"),w=r.a.createElement,b=Object(s.a)(function(){return Object(l.a)({chatButton:{width:"10%"},chatBox:{width:"90%"},type:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},bar:{backgroundColor:"rgb(255,255,255)",top:"auto",bottom:0}})});e.a=function(){var t=b(),e=r.a.useContext(g.b).sendChatAction,n=r.a.useState(""),a=Object(c.a)(n,2),i=a[0],s=a[1],l=function(t){t.preventDefault(),fetch("http://localhost:5000/api/postChat",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:o()({topic:window.localStorage.getItem("topic"),msg:i})}).then(function(t){return t.json()}).then(function(t){401===t.code?(alert("error "+t.message),s("")):(e({id:t.id,sender:m.a.get("user"),msg:i}),s(""))}).catch(function(t){return alert("error "+t.message)})};return w(p.a,{position:"fixed",className:t.bar},w(f.a,{className:t.type},w(u.a,{className:t.chatBox,label:"Send a chat",onKeyDown:function(t){13==t.keyCode&&l(t)},value:i,onChange:function(t){return s(t.target.value)}}),w(d.a,{className:t.chatButton,variant:"contained",color:"secondary",onClick:l},"Send")))}},d5Yn:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/p/[id]",function(){return n("nOj+")}])},"nOj+":function(t,e,n){"use strict";n.r(e);var a=n("pLtp"),o=n.n(a),c=n("doui"),i=n("q1tI"),r=n.n(i),s=n("nOHt"),l=n.n(s),u=n("5Yp1"),d=n("I42U"),p=n("c8I3"),f=n("R/WZ"),h=n("ZBNC"),m=n("eD//"),g=n("tVbE"),w=n("IsqK"),b=n("p46w"),C=n.n(b),y=n("zgjP"),I=n.n(y),N=n("ofer"),v=r.a.createElement,x=Object(f.a)(function(t){return Object(h.a)({root:{display:"flex",flexDirection:"column",flexGrow:1,paddingBottom:50},chatContainer:{padding:"1rem",display:"flex",flexDirection:"column",minHeight:"85vh",background:"#292d3e"},chatItems:{paddingLeft:0,paddingRight:"25vw",color:"#ffcb6b"},chatItemsUser:{paddingLeft:"25vw",paddingRight:0,textAlign:"right",color:"#84ffff"},senderName:{color:"#f07178"},chat:{flexGrow:1},text:{padding:t.spacing(2,2,0)}})});e.default=function(){var t,e=x(),n=r.a.useContext(p.b),a=n.allChats,i=n.dispatch,s=n.topic,f=n.setTopic,h=r.a.useState(!1),b=Object(c.a)(h,2),y=b[0],j=b[1],E=C.a.get("user"),O=r.a.useRef(null);return r.a.useEffect(function(){O.current.scrollIntoView()}),r.a.useEffect(function(){O.current.scrollIntoView()},[a]),r.a.useEffect(function(){I()("http://localhost:5000/api/getChats/".concat(window.localStorage.getItem("topic")),{credentials:"include"}).then(function(t){return t.json()}).then(function(t){200===t.code?(i({type:"FETCH MESSAGE",payload:t.chats}),j(!0)):(f(""),l.a.push("/signin"))})},[s]),t=y?v(r.a.Fragment,null,v(m.a,{className:e.chatContainer},o()(a).map(function(t){return E===a[t].sender?v(g.a,{className:e.chatItemsUser,key:a[t].id},v(w.a,{primary:"".concat(a[t].msg)})):v(g.a,{className:e.chatItems,key:a[t].id},v(w.a,{primary:v(r.a.Fragment,null,v(N.a,{className:e.senderName,component:"span"},"".concat(a[t].sender)+" : "),v(N.a,{component:"span"},"".concat(a[t].msg)))}))}))):v("div",{className:e.chatContainer}),v(r.a.Fragment,null,v(u.a,null,v("div",{className:e.root},t,v("div",{ref:O}),v(d.a,null))))}}},[["d5Yn",1,0]]]);