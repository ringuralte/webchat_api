(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{I42U:function(t,e,n){"use strict";var a=n("9Jkg"),o=n.n(a),c=n("doui"),r=n("q1tI"),i=n.n(r),u=n("R/WZ"),s=n("ZBNC"),l=n("r9w1"),d=n("Z3vd"),p=n("bXiM"),f=n("lO0E"),h=n("p46w"),m=n.n(h),g=n("c8I3"),w=i.a.createElement,b=Object(u.a)(function(){return Object(s.a)({chatButton:{width:"10%"},chatBox:{width:"90%"},type:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},bar:{backgroundColor:"rgb(255,255,255)",top:"auto",bottom:0}})});e.a=function(){var t=b(),e=i.a.useContext(g.b).sendChatAction,n=i.a.useState(""),a=Object(c.a)(n,2),r=a[0],u=a[1],s=function(t){t.preventDefault(),fetch("http://localhost:5000/api/postChat",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:o()({topic:window.localStorage.getItem("topic"),msg:r})}).then(function(t){return t.json()}).then(function(t){401===t.code?(alert("error "+t.message),u("")):(e({id:t.id,sender:m.a.get("user"),msg:r}),u(""))}).catch(function(t){return alert("error "+t.message)})};return w(p.a,{position:"fixed",className:t.bar},w(f.a,{className:t.type},w(l.a,{className:t.chatBox,label:"Send a chat",onKeyDown:function(t){13==t.keyCode&&s(t)},value:r,onChange:function(t){return u(t.target.value)}}),w(d.a,{className:t.chatButton,variant:"contained",color:"secondary",onClick:s},"Send")))}},JNdi:function(t,e,n){"use strict";n.r(e);var a=n("pLtp"),o=n.n(a),c=n("doui"),r=n("q1tI"),i=n.n(r),u=n("nOHt"),s=n("R/WZ"),l=n("ZBNC"),d=n("kKAo"),p=n("eD//"),f=n("tVbE"),h=n("IsqK"),m=n("I42U"),g=n("5Yp1"),w=(n("c8I3"),n("zgjP")),b=n.n(w),y=i.a.createElement,C=Object(s.a)(function(t){return Object(l.a)({root:{display:"flex",flexDirection:"column",flexGrow:1},chatContainer:{padding:"1rem",display:"flex",flexDirection:"column"},paper:{paddingBottom:50},chat:{flexGrow:1},text:{padding:t.spacing(2,2,0)}})});e.default=function(t){var e=C(),n=Object(u.useRouter)(),a=i.a.useState(""),r=Object(c.a)(a,2),s=r[0],l=r[1];return i.a.useEffect(function(){b()("http://localhost:5000/checkToken",{credentials:"include"}).then(function(t){return t.json()}).then(function(t){200!==t.code&&Router.push("/signin")})},[]),i.a.useEffect(function(){b()("http://localhost:5000/api/getChats",{credentials:"include"}).then(function(t){return t.json()}).then(function(t){l(t.rows)})},[]),console.log(n.query.title),y(i.a.Fragment,null,y(g.a,null,y("h1",null,n.query.title),y(d.a,{square:!0,className:e.paper},y(p.a,{className:e.chatContainer},o()(s).map(function(t){return y(f.a,{key:s[t].id},y(h.a,{primary:s[t].sender}),y(h.a,{primary:s[t].msg}))})))),y(m.a,null))}},sfIF:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms",function(){return n("JNdi")}])}},[["sfIF",1,0]]]);