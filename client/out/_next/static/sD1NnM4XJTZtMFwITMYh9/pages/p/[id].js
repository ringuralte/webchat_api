(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{d5Yn:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/p/[id]",function(){return n("nOj+")}])},"nOj+":function(t,e,n){"use strict";n.r(e);var a=n("pLtp"),o=n.n(a),c=n("doui"),i=n("q1tI"),r=n.n(i),s=n("nOHt"),l=n.n(s),d=n("5Yp1"),u=n("9Jkg"),p=n.n(u),f=n("R/WZ"),m=n("ZBNC"),g=n("r9w1"),h=n("Z3vd"),w=n("bXiM"),b=n("lO0E"),y=n("p46w"),C=n.n(y),N=n("c8I3"),v=r.a.createElement,x=Object(f.a)(function(){return Object(m.a)({chatButton:{width:"10%"},chatBox:{width:"90%"},type:{display:"flex",width:"100%",alignItems:"center",justifyContent:"center"},bar:{backgroundColor:"rgb(255,255,255)",top:"auto",bottom:0}})}),j=function(){var t=x(),e=r.a.useContext(N.b).sendChatAction,n=r.a.useState(""),a=Object(c.a)(n,2),o=a[0],i=a[1],s=function(t){t.preventDefault(),fetch("/api/postChat",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:p()({topic:window.localStorage.getItem("topic"),msg:o})}).then(function(t){return t.json()}).then(function(t){401===t.code?(alert("error "+t.message),i("")):(e({id:t.id[0],sender:C.a.get("user"),msg:o,topic:JSON.parse(window.localStorage.getItem("topic"))}),i(""))}).catch(function(t){return alert("error "+t.message)})};return v(w.a,{position:"fixed",className:t.bar},v(b.a,{className:t.type},v(g.a,{className:t.chatBox,label:"Send a chat",onKeyDown:function(t){13==t.keyCode&&s(t)},value:o,onChange:function(t){return i(t.target.value)}}),v(h.a,{className:t.chatButton,variant:"contained",color:"secondary",onClick:s},"Send")))},I=n("eD//"),E=n("tVbE"),O=n("IsqK"),S=n("zgjP"),k=n.n(S),B=n("ofer"),T=r.a.createElement,_=Object(f.a)(function(t){return Object(m.a)({root:{display:"flex",flexDirection:"column",flexGrow:1,paddingBottom:50},chatContainer:{padding:"1rem",display:"flex",flexDirection:"column",minHeight:"85vh",background:"#292d3e"},chatItems:{paddingLeft:0,paddingRight:"25vw",color:"#ffcb6b"},chatItemsUser:{paddingLeft:"25vw",paddingRight:0,textAlign:"right",color:"#84ffff"},senderName:{color:"#f07178"},chat:{flexGrow:1},text:{padding:t.spacing(2,2,0)}})});e.default=function(){var t,e=_(),n=r.a.useContext(N.b),a=n.allChats,i=n.dispatch,s=n.topic,u=n.setTopic,p=r.a.useState(!1),f=Object(c.a)(p,2),m=f[0],g=f[1],h=C.a.get("user"),w=r.a.useRef(null);return r.a.useEffect(function(){w.current.scrollIntoView()}),r.a.useEffect(function(){w.current.scrollIntoView()},[a]),r.a.useEffect(function(){k()("/api/getChats/".concat(window.localStorage.getItem("topic")),{credentials:"include"}).then(function(t){return t.json()}).then(function(t){200===t.code?(i({type:"FETCH MESSAGE",payload:t.chats}),g(!0)):(u(""),l.a.push("/signin"))})},[s]),t=m?T(r.a.Fragment,null,T(I.a,{className:e.chatContainer},o()(a).map(function(t){return h===a[t].sender?T(E.a,{className:e.chatItemsUser,key:a[t].id},T(O.a,{primary:"".concat(a[t].msg)})):T(E.a,{className:e.chatItems,key:a[t].id},T(O.a,{primary:T(r.a.Fragment,null,T(B.a,{className:e.senderName,component:"span"},"".concat(a[t].sender)+" : "),T(B.a,{component:"span"},"".concat(a[t].msg)))}))}))):T("div",{className:e.chatContainer}),T(r.a.Fragment,null,T(d.a,null,T("div",{className:e.root},t,T("div",{ref:w}),T(j,null))))}}},[["d5Yn",1,0]]]);